webpackJsonp([16],{BCbY:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a("Dd8w"),s=a.n(r),i=a("X2Oc"),n=a("NYxO"),o=a("3AVb"),l=a("Gzng"),c=a("6dhf"),u=[],d={mixins:[o.b,o.a],name:"order-list",components:{LazyLoadSelect:l.a,VueQr:c.a},data:function(){return{searchTime:u,dataList:[],tableColWidthConfig:{},totalNum:0,currentPage:1,limitNum:20,editForm:[],idx:-1,deleteVisible:!1,searchStartTime:"",searchEndTime:"",pickerOptions:{shortcuts:[{text:"最近一周",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-6048e5),e.$emit("pick",[a,t])}},{text:"最近一个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-2592e6),e.$emit("pick",[a,t])}},{text:"最近三个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-7776e6),e.$emit("pick",[a,t])}}]}}},created:function(){},watch:{limitNum:function(){this.getDatas()},currentPage:function(){this.getDatas()}},computed:s()({data:function(){return this.dataList.filter(function(e){return e})}},Object(n.d)({}),Object(n.c)(["currentUser","selectItems"])),mounted:function(){this.getDatas()},activated:function(){this.$route.query.refresh,this.getDatas()},deactivated:function(){},methods:{doSearch:function(){this.isLoading&&this.$notify({message:"网络请求中...请稍后",type:"success"}),this.pageNum=1,this.currentPage=1,this.getDatas()},clearSearch:function(){this.searchTime=u,this.doSearch(),this.$notify({message:"清空搜索条件",type:"success"})},timeStr:function(e,t,a){return(0,this.$root.$options.filters.formatTime)(1e3*a)},handleSizeChange:function(e){this.limitNum=e},handleCurrentChange:function(e){this.currentPage=e},getDatas:function(){var e=this;this.isLoading=!0,this.loadingText="网络请求中";var t=this.$root.$options.filters.formatDate;i.a.request({op:"Order.getOrderList",param:{userId:e.currentUser.userId,loginKey:e.currentUser.loginKey,pageNum:e.currentPage,pageLimit:e.limitNum,searchStartTime:e.searchTime?t(e.searchTime[0],""):"",searchEndTime:e.searchTime?t(e.searchTime[1],""):""},success:function(t){e.isLoading=!1,e.dataList=t.list,e.totalNum=t.totalNum},error:function(t){e.isLoading=!1,e.$message({message:""+t,type:"warning"})}})}}},p={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"news-list-wrap"},[a("div",{staticClass:"crumbs"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",[a("i",{staticClass:"el-icon-lx-apps"}),e._v(" 订单列表 ")])],1)],1),e._v(" "),a("div",{staticClass:"container"},[a("el-collapse",{staticClass:"base-search-wrapper",attrs:{value:"1"}},[a("el-collapse-item",{attrs:{title:"搜索条件",name:"1"}},[a("el-row",{attrs:{gutter:16}},[a("el-col",{attrs:{span:8}},[a("el-tooltip",{attrs:{effect:"dark",content:"时间",placement:"top"}},[a("el-date-picker",{attrs:{type:"daterange",align:"center","range-separator":"-","start-placeholder":"开始日期","end-placeholder":"结束日期",clearable:!0,"picker-options":e.pickerOptions},model:{value:e.searchTime,callback:function(t){e.searchTime=t},expression:"searchTime"}})],1)],1)],1)],1)],1),e._v(" "),a("div",{staticClass:"base-left-right-wrapper border-bottom tag-wrapper"},[a("div",{staticClass:"left"},[a("el-button",{staticClass:"search-btn",attrs:{type:e.isLoading?"info":"primary"},on:{click:function(t){return e.doSearch()}}},[e._v(e._s(e.isLoading?e.loadingText:"查询订单"))]),e._v(" "),a("el-tooltip",{attrs:{effect:"dark",content:"清空搜索条件",placement:"right"}},[a("el-button",{attrs:{type:"danger",plain:"",icon:"el-icon-close",round:"",size:"mini"},on:{click:e.clearSearch}})],1)],1)]),e._v(" "),a("el-table",{ref:"multipleTable",staticClass:"common-table-wrapper",attrs:{id:"tableList",data:e.dataList,border:!0},on:{"header-dragend":e.setTableWidth}},[a("el-table-column",{attrs:{align:"center",prop:"id",label:"ID",width:"90",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"订单号",sortable:"",prop:"outTradeNo"}}),e._v(" "),a("el-table-column",{attrs:{resizable:!1,align:"center",label:"用户",sortable:"",prop:"userName"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{domProps:{textContent:e._s(t.row.userInfo?t.row.userInfo.userName:"系统")}})]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"用户手机号",sortable:"",prop:"phone"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{domProps:{textContent:e._s(t.row.userInfo?t.row.userInfo.phone:"")}})]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"状态",sortable:"",prop:"status"},scopedSlots:e._u([{key:"default",fn:function(t){return[3==t.row.status?a("el-tag",{attrs:{align:"center",type:"success","disable-transitions":""}},[e._v("已支付")]):0==t.row.status?a("el-tag",{attrs:{align:"center",type:"success","disable-transitions":""}},[e._v("未支付")]):a("el-tag",{attrs:{align:"center",type:"info","disable-transitions":""}},[e._v("已取消")])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"金额(元)",sortable:"",prop:"price"}}),e._v(" "),a("el-table-column",{attrs:{width:"170",prop:"createTime",formatter:e.timeStr,label:"创建时间",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{width:"170",prop:"updateTime",formatter:e.timeStr,label:"修改时间",sortable:""}})],1),e._v(" "),a("el-pagination",{attrs:{"current-page":e.currentPage,background:"","page-sizes":e.pageSizes,"page-size":e.limitNum,layout:"total, sizes, prev, pager, next, jumper",total:e.totalNum},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),e._v(" "),a("el-dialog",{attrs:{title:"提示",visible:e.deleteVisible,width:"50%",center:""},on:{"update:visible":function(t){e.deleteVisible=t}}},[a("div",{staticStyle:{"text-align":"center"}},[e._v("\n      删除不可恢复，是否确定删除资讯：\n      "),a("strong",{staticClass:"red",domProps:{textContent:e._s(e.editForm.id)}})]),e._v(" "),a("span",{staticClass:"common-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.deleteVisible=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.deleteData}},[e._v("确定")])],1)])],1)},staticRenderFns:[]};var m=a("VU/8")(d,p,!1,function(e){a("Yk0f")},"data-v-3c3a42d2",null);t.default=m.exports},Yk0f:function(e,t){}});