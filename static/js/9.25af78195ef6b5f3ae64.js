webpackJsonp([9],{"D/vs":function(t,e){},MW0f:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i,s=a("bOdI"),r=a.n(s),n=a("Dd8w"),l=a.n(n),o=a("X2Oc"),c=a("NYxO"),u=a("3AVb"),d=a("Gzng"),m=a("6dhf"),p={mixins:[u.b,u.a],name:"task-list",components:{LazyLoadSelect:d.a,VueQr:m.a},data:function(){return{dataList:[],tableColWidthConfig:{},totalNum:0,currentPage:1,limitNum:20,editForm:[],idx:-1,deleteVisible:!1}},created:function(){},watch:{limitNum:function(){this.getDatas()},currentPage:function(){this.getDatas()}},computed:l()({data:function(){return this.dataList.filter(function(t){return t})}},Object(c.d)({}),Object(c.c)(["currentUser","selectItems"])),mounted:function(){this.getDatas()},activated:function(){this.$route.query.refresh,this.getDatas()},deactivated:function(){},methods:(i={deleteData:function(){var t=this;o.a.request({op:"Task.deleteTask",param:{ids:t.editForm.id,userId:t.currentUser.userId,loginKey:t.currentUser.loginKey},success:function(e){t.deleteVisible=!1,t.$message({message:"删除成功",type:"success"}),t.dataList.splice(t.idx,1)},error:function(e){t.$message({message:""+e,type:"warning"})}})},timeStr:function(t,e,a){return(0,this.$root.$options.filters.formatTime)(1e3*a)},showDelete:function(t,e){this.editForm={id:e.id},this.idx=t,this.deleteVisible=!0},handleSizeChange:function(t){this.limitNum=t},handleCurrentChange:function(t){this.currentPage=t},gotoCreate:function(t){this.$router.push({path:"/task/create",query:{refresh:!0,id:t}})}},r()(i,"showDelete",function(t,e){this.editForm={id:e.id},this.idx=t,this.deleteVisible=!0}),r()(i,"getDatas",function(){var t=this;this.isLoading=!0,this.loadingText="网络请求中",o.a.request({op:"Task.getTaskList",param:{userId:t.currentUser.userId,loginKey:t.currentUser.loginKey,pageNum:1,pageLimit:100},success:function(e){t.isLoading=!1,t.dataList=e.list,t.totalNum=e.totalNum},error:function(e){t.isLoading=!1,t.$message({message:""+e,type:"warning"})}})}),i)},b={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"task-list-wrap"},[a("div",{staticClass:"crumbs"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",[a("i",{staticClass:"el-icon-lx-apps"}),t._v(" 任务列表 ")])],1)],1),t._v(" "),a("div",{staticClass:"container"},[a("div",{staticClass:"base-left-right-wrapper border-bottom"},[a("div",{staticClass:"left"}),t._v(" "),a("div",{staticClass:"right"},[a("el-button",{staticClass:"search-btn",attrs:{type:"success"},on:{click:function(e){return t.gotoCreate(0)}}},[t._v("创建任务")])],1)]),t._v(" "),a("el-table",{ref:"multipleTable",staticClass:"common-table-wrapper",attrs:{id:"tableList",data:t.dataList,border:!0},on:{"header-dragend":t.setTableWidth}},[a("el-table-column",{attrs:{align:"center",prop:"id",label:"ID",width:"90",sortable:""}}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"标题",sortable:"",prop:"title"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"详情",sortable:"",prop:"detail"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"奖励",sortable:"",prop:"award"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"来源",sortable:"",prop:"from"}}),t._v(" "),a("el-table-column",{attrs:{resizable:!1,align:"center",label:"创建人",sortable:"",prop:"userName"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{domProps:{textContent:t._s(e.row.userInfo?e.row.userInfo.userName:"系统")}})]}}])}),t._v(" "),a("el-table-column",{attrs:{width:"170",prop:"createTime",formatter:t.timeStr,label:"创建时间",sortable:""}}),t._v(" "),a("el-table-column",{attrs:{width:"170",prop:"updateTime",formatter:t.timeStr,label:"修改时间",sortable:""}}),t._v(" "),a("el-table-column",{attrs:{label:"操作",width:"80",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{staticClass:"op-btn",attrs:{type:"primary",plain:"",size:"mini"},on:{click:function(a){return t.gotoCreate(e.row.id)}}},[t._v("编辑\n          ")]),t._v(" "),a("el-button",{staticClass:"op-btn",attrs:{size:"mini",plain:"",type:"danger"},on:{click:function(a){return t.showDelete(e.$index,e.row)}}},[t._v("删除\n          ")])]}}])})],1),t._v(" "),a("el-pagination",{attrs:{"current-page":t.currentPage,background:"","page-sizes":t.pageSizes,"page-size":t.limitNum,layout:"total, sizes, prev, pager, next, jumper",total:t.totalNum},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1),t._v(" "),a("el-dialog",{attrs:{title:"提示",visible:t.deleteVisible,width:"50%",center:""},on:{"update:visible":function(e){t.deleteVisible=e}}},[a("div",{staticStyle:{"text-align":"center"}},[t._v("\n      删除不可恢复，是否确定删除任务：\n      "),a("strong",{staticClass:"red",domProps:{textContent:t._s(t.editForm.id)}})]),t._v(" "),a("span",{staticClass:"common-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.deleteVisible=!1}}},[t._v("取消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.deleteData}},[t._v("确定")])],1)])],1)},staticRenderFns:[]};var g=a("VU/8")(p,b,!1,function(t){a("D/vs")},"data-v-fa534e82",null);e.default=g.exports}});