webpackJsonp([12],{"6Xgj":function(e,t){},wkPc:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=r("Dd8w"),a=r.n(i),s=r("X2Oc"),o=r("NYxO"),d={name:"task-create",data:function(){return{editForm:{title:"",detail:"",award:1,from:""}}},computed:a()({},Object(o.d)({}),Object(o.c)(["currentUser","selectItems"]),{id:function(){return this.$route.query.id||0}}),mounted:function(){},created:function(){},activated:function(){this.$route.query.refresh?0!=this.id?(this.getTaskInfo(this.id),this.$router.replace({path:"/task/create",query:{refresh:!1,id:this.id}})):this.editForm={id:0,title:"",detail:"",award:1,from:""}:0==this.id&&(this.editForm={id:0,title:"",detail:"",award:1,from:""})},methods:{getTaskInfo:function(e){var t=this;s.a.request({op:"Task.taskInfo",param:{id:e},success:function(e){t.editForm.id=e.id,t.editForm.detail=e.detail,t.editForm.title=e.title,t.editForm.award=e.award,t.editForm.from=e.from},error:function(e){}})},saveEdit:function(e){var t=this;0!=this.editForm.id?s.a.request({op:"Task.reviseTask",type:"post",param:{loginKey:t.currentUser.loginKey,userId:t.currentUser.userId,id:t.editForm.id,title:t.editForm.title,detail:t.editForm.detail,award:t.editForm.award,from:t.editForm.from},success:function(e){t.$message.success("修改任务成功"),t.$router.push({path:"/task/list",query:{refresh:!0}})},error:function(e){t.$message({message:""+e,type:"warning"})}}):s.a.request({op:"Task.createTask",type:"post",param:{loginKey:t.currentUser.loginKey,userId:t.currentUser.userId,title:t.editForm.title,detail:t.editForm.detail,award:t.editForm.award,from:t.editForm.from},success:function(e){t.$message.success("创建任务成功"),t.$router.push({path:"/task/list",query:{refresh:!0}})},error:function(e){t.$message({message:""+e,type:"warning"})}})}}},l={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"create"},[r("div",{staticClass:"crumbs"},[r("el-breadcrumb",{attrs:{separator:"/"}},[r("el-breadcrumb-item",[r("i",{staticClass:"el-icon-lx-people"}),e._v(" 创建任务 ")])],1)],1),e._v(" "),r("div",{staticClass:"container"},[r("el-form",{ref:"editForm",staticClass:"task-info",attrs:{"label-position":"left","label-width":"50px",model:e.editForm}},[r("el-form-item",{attrs:{label:"标题:"}},[r("el-input",{attrs:{maxlength:"50",clearable:""},model:{value:e.editForm.title,callback:function(t){e.$set(e.editForm,"title",t)},expression:"editForm.title"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"详情:"}},[r("el-input",{attrs:{type:"textarea",rows:10,maxlength:"20",clearable:""},model:{value:e.editForm.detail,callback:function(t){e.$set(e.editForm,"detail",t)},expression:"editForm.detail"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"奖励:"}},[r("el-input-number",{attrs:{min:1,max:9999,clearable:""},model:{value:e.editForm.award,callback:function(t){e.$set(e.editForm,"award",t)},expression:"editForm.award"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"来源:"}},[r("el-input",{attrs:{maxlength:"80",clearable:""},model:{value:e.editForm.from,callback:function(t){e.$set(e.editForm,"from",t)},expression:"editForm.from"}})],1),e._v(" "),r("div",{staticClass:"common-footer"},[r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.saveEdit("editForm")}}},[e._v(e._s(e.editForm.id?"修改":"创建"))])],1)],1)],1)])},staticRenderFns:[]};var n=r("VU/8")(d,l,!1,function(e){r("6Xgj")},"data-v-8c449494",null);t.default=n.exports}});