webpackJsonp([7],{"5zde":function(e,t,r){r("zQR9"),r("qyJz"),e.exports=r("FeBl").Array.from},Gu7T:function(e,t,r){"use strict";t.__esModule=!0;var s,a=r("c/Tr"),n=(s=a)&&s.__esModule?s:{default:s};t.default=function(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return(0,n.default)(e)}},PplQ:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=r("Gu7T"),a=r.n(s),n=r("Dd8w"),i=r.n(n),o=r("X2Oc"),l=r("3AVb"),c=r("Gzng"),u=r("NYxO"),d={name:"user-list",mixins:[l.b,l.a],components:{LazyLoadSelect:c.a},data:function(){return{privilegeList:[],editRules:{userName:[{required:!0,message:"请输入账户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}]},editForm:[],idx:-1,dataList:[],limitNum:100,pageSizes:[500,300,200,100],totalNum:0,sortType:0,sortOrder:0,searchUserName:"",searchUserIds:"",currentPage:1,deleteVisible:!1,knowledgeTreeList:[],searchShareUserId:"",searchPhone:"",searchPrivilege:"",enableActivated:!1}},computed:i()({data:function(){return this.dataList.filter(function(e){return e})}},Object(u.d)({}),Object(u.c)(["currentUser","selectItems"]),{shareUserOptions:function(){var e=this.selectItems.option_userList||[];return this.currentUser.user.shareUsers&&this.currentUser.user.shareUsers.length?this.currentUser.user.shareUsers:e}}),methods:{getDatas:function(){var e=this;o.a.request({op:"BackstageUser.getUsers",param:{searchUserName:this.searchUserName,pageNum:this.currentPage,pageLimit:this.limitNum,sortType:this.sortType,sortOrder:this.sortOrder,loginKey:this.currentUser.loginKey,userId:this.currentUser.userId,searchShareUserId:this.searchShareUserId,searchUserIds:this.searchUserIds,searchPhone:this.searchPhone,searchPrivilege:this.searchPrivilege},success:function(t){e.dataList=t.list,e.totalNum=t.totalNum},error:function(t){e.$message.warning(""+t)}})},getPrivileges:function(){var e=this,t=[];o.a.request({op:"Backstage.getPrivileges",param:{},success:function(r){e.privilegeList=[].concat(t,a()(r.list))},error:function(t){e.$message.warning(""+t)}})},gotoUserInfo:function(e){this.$router.push({path:"/user/info",query:{userId:e,refresh:!0,openEdit:0}})},gotoUserCreate:function(){this.$router.push({path:"/user/create",query:{}})},deleteData:function(){var e=this;if(e.currentUser.userId==e.editForm.id)return!1;o.a.request({op:"BackstageUser.deleteUser",param:{loginKey:e.currentUser.loginKey,userId:e.currentUser.userId,id:e.editForm.id},success:function(t){e.dataList.splice(e.idx,1),e.$message.success("删除 "+e.editForm.userName+" 成功")},error:function(t){e.$message.warning(""+t)}}),e.deleteVisible=!1},showDelete:function(e,t){if(this.currentUser.userId==t.userId)return!1;this.editForm={id:t.userId,userName:t.userName},this.idx=e,this.deleteVisible=!0},handleSizeChange:function(e){this.limitNum=e},handleCurrentChange:function(e){this.currentPage=e},doSearch:function(){this.currentPage=1,this.pageNum=1,this.getDatas()},clearSearch:function(){this.searchUserName="",this.searchShareUserId="",this.searchUserIds="",this.searchPhone="",this.searchPrivilege="",this.searchPartTimeUser="",this.doSearch(),this.$notify.success("清空搜索条件")},timeStr:function(e,t,r){return(0,this.$root.$options.filters.formatTime)(1e3*r)},filterStatus:function(e,t){return t.status==e}},watch:{limitNum:function(){this.getDatas()},currentPage:function(){this.getDatas()},searchDdUser:function(){this.searchDdUser&&(this.searchPartTimeUser=!1)},searchPartTimeUser:function(){this.searchPartTimeUser&&(this.searchDdUser=!1)}},activated:function(){this.enableActivated&&this.getDatas()},deactivated:function(){this.enableActivated=!0},mounted:function(){this.getPrivileges(),this.getDatas()}},h={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"list"},[r("div",{staticClass:"crumbs"},[r("el-breadcrumb",{attrs:{separator:"/"}},[r("el-breadcrumb-item",[r("i",{staticClass:"el-icon-lx-apps"}),e._v(" 账号列表 ")])],1)],1),e._v(" "),r("div",{staticClass:"container"},[r("el-collapse",{staticClass:"base-search-wrapper",attrs:{value:"1"}},[r("el-collapse-item",{attrs:{title:"搜索条件",name:"1"}},[r("el-row",{attrs:{gutter:8}},[r("el-col",{attrs:{span:4}},[r("el-tooltip",{attrs:{effect:"dark",content:"账号名称",placement:"top"}},[r("el-input",{attrs:{clearable:"",placeholder:"名称关键字"},on:{blur:e.doSearch,clear:e.doSearch},nativeOn:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.doSearch()}},model:{value:e.searchUserName,callback:function(t){e.searchUserName=t},expression:"searchUserName"}})],1)],1),e._v(" "),r("el-col",{attrs:{span:4}},[r("el-tooltip",{attrs:{effect:"dark",content:"手机号",placement:"top"}},[r("el-input",{attrs:{clearable:"",placeholder:"手机号"},on:{blur:e.doSearch,clear:e.doSearch},nativeOn:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.doSearch()}},model:{value:e.searchPhone,callback:function(t){e.searchPhone=t},expression:"searchPhone"}})],1)],1)],1),e._v(" "),r("el-row",{attrs:{gutter:8}},[r("el-col",{attrs:{span:4}},[r("el-tooltip",{attrs:{effect:"dark",content:"拥有权限",placement:"top"}},[r("el-select",{attrs:{filterable:"",clearable:"",placeholder:"选择权限"},model:{value:e.searchPrivilege,callback:function(t){e.searchPrivilege=t},expression:"searchPrivilege"}},e._l(e.privilegeList,function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1)],1),e._v(" "),r("el-col",{attrs:{span:4}},[r("el-tooltip",{attrs:{effect:"dark",content:"绑定的分享账号",placement:"top"}},[r("lazy-load-select",{attrs:{placeholder:"绑定的分享账号",clearable:"",filterable:"",options:e.shareUserOptions,props:{label:"userName",value:"userId"}},model:{value:e.searchShareUserId,callback:function(t){e.searchShareUserId=t},expression:"searchShareUserId"}})],1)],1)],1)],1)],1),e._v(" "),r("div",{staticClass:"base-left-right-wrapper border-bottom"},[r("div",{staticClass:"left"},[r("el-button",{staticClass:"search-btn",attrs:{type:e.isLoading?"info":"primary"},on:{click:function(t){return e.doSearch()}}},[e._v(e._s(e.isLoading?e.loadingText:"查询")+"\n        ")]),e._v(" "),r("el-tooltip",{attrs:{effect:"dark",content:"清空搜索条件",placement:"right"}},[r("el-button",{attrs:{type:"danger",plain:"",icon:"el-icon-close",round:"",size:"mini"},on:{click:e.clearSearch}})],1)],1),e._v(" "),r("div",{staticClass:"right"},[r("el-button",{directives:[{name:"show",rawName:"v-show",value:0!=e.currentUser.user.type,expression:"currentUser.user.type != 0"}],attrs:{type:"success"},on:{click:function(t){return e.gotoUserCreate()}}},[e._v("创建账号 ")])],1)]),e._v(" "),r("el-table",{ref:"multipleTable",staticClass:"common-table-wrapper",attrs:{data:e.dataList,id:"tableList",border:!0,"row-key":"userId"}},[r("el-table-column",{attrs:{align:"center",prop:"userId",label:"账号ID",width:"90",sortable:""}}),e._v(" "),r("el-table-column",{attrs:{align:"center",prop:"userName",label:"账号",width:"90"}}),e._v(" "),r("el-table-column",{attrs:{align:"center",prop:"phone",label:"手机号",width:"110"}}),e._v(" "),r("el-table-column",{attrs:{align:"center",prop:"phone",label:"绑定的分享账号",width:"300"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.shareUsers,function(t){return r("div",[r("el-tag",{staticClass:"common-column-tag",attrs:{size:"mini",effect:"plain",type:"success"}},[e._v(e._s(t.userName))])],1)})}}])}),e._v(" "),r("el-table-column",{attrs:{align:"center",label:"账号类型",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-tag",{directives:[{name:"show",rawName:"v-show",value:0==t.row.type,expression:"scope.row.type == 0"}],attrs:{type:"success","disable-transitions":""}},[e._v("特邀推广")]),e._v(" "),r("el-tag",{directives:[{name:"show",rawName:"v-show",value:666==t.row.type,expression:"scope.row.type == 666"}],attrs:{type:"primary","disable-transitions":""}},[e._v("超级管理员")]),e._v(" "),r("el-tag",{directives:[{name:"show",rawName:"v-show",value:1==t.row.type,expression:"scope.row.type == 1"}],attrs:{type:"primary","disable-transitions":""}},[e._v("管理员")])]}}])}),e._v(" "),r("el-table-column",{attrs:{align:"center",prop:"status",width:"70",label:"状态",filters:[{text:"正常",value:0},{text:"封禁",value:2}],"filter-method":e.filterStatus,"filter-placement":"bottom-end"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-tag",{directives:[{name:"show",rawName:"v-show",value:0==t.row.status,expression:"scope.row.status == 0"}],attrs:{type:"success","disable-transitions":""}},[e._v("正常")]),e._v(" "),r("el-tag",{directives:[{name:"show",rawName:"v-show",value:1==t.row.status,expression:"scope.row.status == 1"}],attrs:{type:"info","disable-transitions":""}},[e._v("封禁")])]}}])}),e._v(" "),r("el-table-column",{attrs:{align:"center",label:"创建者",width:"90"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v("\n            "+e._s(t.row.createUserInfo&&t.row.createUserInfo.userName||"系统")+"\n          ")])]}}])}),e._v(" "),r("el-table-column",{attrs:{prop:"lastLoginTime",width:"160",formatter:e.timeStr,label:"最近登录时间",align:"center",sortable:""}}),e._v(" "),r("el-table-column",{attrs:{prop:"createTime",width:"160",formatter:e.timeStr,label:"创建时间",sortable:""}}),e._v(" "),0!=e.currentUser.user.type?r("el-table-column",{attrs:{label:"操作",width:"80",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.userId!=e.currentUser.user.userId&&0==t.row.type?r("el-button",{staticClass:"op-btn",attrs:{type:"primary",plain:"",size:"mini"},on:{click:function(r){return e.gotoUserInfo(t.row.userId)}}},[e._v("编辑\n          ")]):e._e(),e._v(" "),666==t.row.type||t.row.userId==e.currentUser.user.userId||!t.row.userId||666!=e.currentUser.user.type&&1!=e.currentUser.user.type?e._e():r("el-button",{staticClass:"op-btn",attrs:{size:"mini",plain:"",type:"danger"},on:{click:function(r){return e.showDelete(t.$index,t.row)}}},[e._v("删除\n          ")]),e._v(" "),t.row.userId==e.currentUser.user.userId?r("el-button",{staticClass:"op-btn",attrs:{size:"mini",plain:"",type:"warning"},on:{click:function(r){return e.gotoUserInfo(t.row.userId)}}},[e._v("自己\n          ")]):e._e()]}}],null,!1,3694343699)}):e._e()],1),e._v(" "),r("el-pagination",{attrs:{"current-page":e.currentPage,background:"","page-sizes":e.pageSizes,"page-size":e.limitNum,layout:"total, sizes, prev, pager, next, jumper",total:e.totalNum},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),e._v(" "),r("el-dialog",{attrs:{title:"提示",visible:e.deleteVisible,width:"50%",center:""},on:{"update:visible":function(t){e.deleteVisible=t}}},[r("div",{staticStyle:{"text-align":"center"}},[e._v("\n      删除不可恢复，是否确定删除账号：\n      "),r("strong",{staticClass:"red",domProps:{textContent:e._s(e.editForm.userName)}})]),e._v(" "),r("span",{staticClass:"common-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.deleteVisible=!1}}},[e._v("取消")]),e._v(" "),r("el-button",{attrs:{type:"primary"},on:{click:e.deleteData}},[e._v("确定")])],1)])],1)},staticRenderFns:[]};var p=r("VU/8")(d,h,!1,function(e){r("tNZX")},"data-v-513f9192",null);t.default=p.exports},"c/Tr":function(e,t,r){e.exports={default:r("5zde"),__esModule:!0}},fBQ2:function(e,t,r){"use strict";var s=r("evD5"),a=r("X8DO");e.exports=function(e,t,r){t in e?s.f(e,t,a(0,r)):e[t]=r}},qyJz:function(e,t,r){"use strict";var s=r("+ZMJ"),a=r("kM2E"),n=r("sB3e"),i=r("msXi"),o=r("Mhyx"),l=r("QRG4"),c=r("fBQ2"),u=r("3fs2");a(a.S+a.F*!r("dY0y")(function(e){Array.from(e)}),"Array",{from:function(e){var t,r,a,d,h=n(e),p="function"==typeof this?this:Array,f=arguments.length,m=f>1?arguments[1]:void 0,v=void 0!==m,g=0,b=u(h);if(v&&(m=s(m,f>2?arguments[2]:void 0,2)),void 0==b||p==Array&&o(b))for(r=new p(t=l(h.length));t>g;g++)c(r,g,v?m(h[g],g):h[g]);else for(d=b.call(h),r=new p;!(a=d.next()).done;g++)c(r,g,v?i(d,m,[a.value,g],!0):a.value);return r.length=g,r}})},tNZX:function(e,t){}});